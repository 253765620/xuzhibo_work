*** Settings ***
Test Teardown     Run Keyword If Test Failed    Fatal Error
Library           SerialLibrary
Library           Utils
Library           Power
Library           NetTest

*** Test Cases ***
PID查询是否为空
    ${is_have_pid}    serial send    IOT+D1+N.SN=?    IOT+D3    #PID查询    ${lenpid}    length    ${is_have_pid}    Run Keyword If    ${lenpid}>1    Fail    PID不为空    #PID查询结果是否为空    : FOR    ${i}    INRANGE    20    \    ${k}    serial send    IOT+S1+ai.m.con.st=?    IOT+S1+AI.M.CON.ST=1    \    Exit For Loop If    '${k}'=='1'    \    sleep    1    Run Keyword If    ${i}==19    fail    IOT+S1+ai.m.con.st失败    ai_test    sleep    2    serial_send    IOT+V1+ai.fom.nt=01   IOT+V1+AI.FOM.NT=successful    sleep    1    serial_send    IOT+S1+ai.m.ai.fom.ack=?    IOT+S1+AI.M.AI.FOM.ACK=2    ${a}    serial send    (CESHI)MODEM INFO    (CESHI)MODEM    ${b}    get_flag_1    ${a}    ICCID    1    ${sim}    Set Variable    ${ICCID_SIM['${b}']}    ${d}    serial send    IOT+D1150511+WA.SIM=${ICCID_SIM['${b}']}    IOT    ${sim1}    Set Variable    ${ICCID_SIM['${b}']}    Run Keyword If    '${sim}'!='${d}'    fail    sim查询错误
    serial send    IOT+D1150511+N.SN=${pid_start}    IOT+D1150511+N.SN=${pid_start}    #PID设置
    serial send    IOT+D1+N.SN=?    IOT+D3+N.SN=${pid_start}    #PID查询
    ${date}    serial_send    IOT+D1+N.P.D=?    IOT
    ${tdid}    zhongji_id    t    d    ${date}    ${pid_start}
    ${tcid}    zhongji_id    t    c    ${date}    ${pid_start}
    ${adid}    zhongji_id    a    d    ${date}    ${pid_start}
    ${acid}    zhongji_id    a    c    ${date}    ${pid_start}
    serial_send    IOT+L1+mat3.f1.dide=?    IOT+L1+MAT3.F1.DIDE=${tdid}
    serial_send    IOT+L1+mat3.f1.ide=?    IOT+L1+MAT3.F1.IDE=${tcid}
    serial_send    IOT+V1+ai.m.info.req=    IOT+V1+AI.M.INFO.REQ=successful
    serial_send    IOT+C1+ai.m.dev.id=?    IOT+C1+AI.M.DEV.ID=${adid}
    serial_send    IOT+C1+ai.m.cli.id=?    IOT+C1+AI.M.CLI.ID=${acid}
